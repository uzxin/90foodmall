<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="css/shop.css" type="text/css" rel="stylesheet" />
  <link href="css/Sellerber.css" type="text/css"  rel="stylesheet" />
  <link href="css/bkg_ui.css" type="text/css"  rel="stylesheet" />
  <link href="font/css/font-awesome.min.css"  rel="stylesheet" type="text/css" />
  <script src="js/jquery-1.9.1.min.js" type="text/javascript" ></script>
  <script type="text/javascript" src="js/jquery.cookie.js"></script>
  <script src="js/Sellerber.js" type="text/javascript"></script>
  <script src="js/shopFrame.js" type="text/javascript"></script>
  <script src="js/dist/echarts.js" type="text/javascript"></script>
  <script src="js/jquery.nicescroll.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
  <script src="js/html5shiv.js" type="text/javascript"></script>
  <script src="js/respond.min.js"></script>
  <script src="js/css3-mediaqueries.js"  type="text/javascript"></script>
    <![endif]-->
  <title>首页</title>
</head>

<body  id="iframe_box">
<div id="index_style" style="height:100%" class="clearfix">
<div class="spacing_style" ></div>
 <div class="margin-bottom clearfix ">
  <div class="col-xs-2 col-sm-2 col-md-2 col-lg-4">
   <a href="/store/Orders.html" class="tile-button btn_Plate bg-red ">
    <div class="carousel Module_info">
     <div class="left_img bg_color_red">
      <i class="fa fa-shopping-cart"></i>
      <h3>订单</h3>
     </div>
     <div class="right_info" id="order_number"></div>
    </div>
   </a>
  </div>
  <div class="col-xs-2 col-sm-2 col-md-2 col-lg-4">
   <a href="javascript:ovid()" class="tile-button btn_Plate bg-deep-blue">
   <div class="carousel Module_info">
   <div class="left_img bg_color_bule">
    <i class="fa fa-cny"></i>
    <h3>成交金额</h3>
   </div>
   <div class="right_info" id="turnover"></div>
   </div>
   </a>
  </div>
   <div class="col-xs-2 col-sm-2 col-md-2 col-lg-4">
   <a href="/store/feedback.html" class="tile-button btn_Plate bg-green">
   <div class="carousel Module_info">
   <div class="left_img bg_color_green">
    <i class="fa  fa-comments-o"></i>
    <h3>评价</h3>
   </div>
   <div class="right_info" id="review_number"></div>
   </div>
   </a>
  </div>
 <div class="col-xs-2 col-sm-2 col-md-2 col-lg-4">
   <a href="/store/Products.html" class="tile-button btn_Plate bg-orange">
   <div class="carousel Module_info">
   <div class="left_img bg_color_orange">
    <i class="fa fa-plus-square "></i>
    <h3>商品</h3>
   </div>
   <div class="right_info" id="product_number"></div>
   </div>
   </a>
  </div>
  <div class="col-xs-2 col-sm-2 col-md-2 col-lg-4">
   <a href="/store/Order_Logistics.html" class="tile-button btn_Plate bg-purple">
   <div class="carousel Module_info">
   <div class="left_img bg_color_purple">
    <i class="fa  fa-clock-o "></i>
    <h3>物流</h3>
   </div>
   <div class="right_info" id="logistics_number"></div>
   </div>
   </a>
  </div>
   <div class="col-xs-2 col-sm-2 col-md-2 col-lg-4">
   <a href="/store/Refund.html" class="tile-button btn_Plate bg-yellow">
   <div class="carousel Module_info">
   <div class="left_img bg_color_yellow">
    <i class="fa  fa-volume-up "></i>
    <h3>退款</h3>
   </div>
   <div class="right_info" id="refund_number"></div>
   </div>
   </a>
  </div>
 </div>
 <div class="center  clearfix margin-bottom">
 <!--店铺信息-->
 <div class="col-lg-2 col-xs-3 col-md-3 ">
 	<div class="com_plate_style clearfix">
			<div class="set-time clearfix" id="set-time"></div>
		</div>
 </div>
 <div class="col-lg-7 col-xs-6 col-md-6 ">
 <div class="Shops_info clearfix frame">
  <div class="left_shop">
  <div class="left_shop_logo">
   <div class="shop_logo">
     <span class="bg_yuan"></span><img id="headImg" /></div>
   <a href="#" class="btn bg-deep-blue paddings">进入首页</a>
   </div>
   <div class="Shops_content">
   <ul class="clearfix">
    <li><label class="name">店铺ID：</label><label id="id"></label></li>
    <li><label class="name">店铺名称：</label><label id="name"></label></li>
    <li><label class="name">店铺等级：</label><label id="level"></label></li>
    <li><label class="name">开通时间：</label><label id="createTime"></label></li>
    </ul>
   </div>
  
  
  <div class="right_shop">
   <p> 店铺动态评分：</p>
   <ul>
   <li><label class="name">相符描述</label><span id="scoreDescription" class="score"></span></li>
   <li><label class="name">服务态度</label><span id="scoreServiceAttitude" class="score"></span></li>
   <li><label class="name">发货速度</label><span id="scoreDeliverySpeed" class="score"></span></li>
   </ul>
  </div>
  </div>
  <div class="operating_style Quick_operation menuUl" >
  <ul class="submenu">
   <li class=""><a href="javascript:void(0)" name="add_product.html" class="btn" title="添加产品">添加产品</a></li>
   <li class=""><a href="javascript:void(0)" name="add_Advertising.html" class="btn" title="添加广告">添加广告</a></li>
   <li class=""><a href="javascript:void(0)" name="add_Article.html" class="btn" title="添加文章">添加文章</a></li>
   <li class=""><a href="javascript:void(0)" name="add_Singlepag.html" class="btn" title="新增单页面">新增单页面</a></li>
  </ul>
  </div>
 </div>
 </div>
 <div class=" col-xs-3">
  <div class="admin_info frame clearfix">
  <div class="title_name"><i></i>登陆记录 <a href="#">+更多</a></div>
  <table class="record_list table table_list">
  <tbody>
   <tr><td>管理员</td><td>2016-08-04 12:45:43</td></tr>
   <tr><td>管理员</td><td>2016-08-14 23:34:23</td></tr>
   <tr><td>管理员</td><td>2016-08-24 11:34:53</td></tr>
   <tr><td>管理员</td><td>2016-08-24 11:34:53</td></tr>
   <tr><td>管理员</td><td>2016-08-24 11:34:53</td></tr>
   </tbody>
  </table>
  </div>
 </div>
 </div>
 <!---->
 <div class="Order_form ">
  <div class="col-xs-6 col-lg-7">
  <div class="frame margin-right clearfix">
  <div class="title_name"><i></i>店铺/订单状态提示</div>
  <div class="clearfix">
  <div class="col-xs-3 col-lg-6 ">   
   <div class="prompt_name"><i class="icon_Order"></i>商品</div>
   <ul class="padding list_info">   
   <li>待审核 &nbsp;<a href="/store/Products.html" id="product_pending_review"></a></li>
   <li>通过 &nbsp;<a href="/store/Products.html" id="product_psss"></a></li>
   <li>不通过 &nbsp;<a href="/store/review.html" id="product_nopass"></a></li>
   </ul>
  </div>
   <div class="col-xs-3 col-lg-6">    
   <div class="prompt_name"><i class="icon_Promotions"></i>订单</div>
   <ul class="padding list_info">   
   <li>已完成 &nbsp;<a href="/store/Orders.html" id="order_completed"></a></li>
   <li>待发货 &nbsp;<a href="/store/Orders.html" id="order_toBeDelivered"></a></li>
   <li>待收货 &nbsp;<a href="/store/Orders.html" id="order_toBeReceived"></a></li>
   </ul>
  </div>
   <div class="col-xs-3 col-lg-6">    
   <div class="prompt_name"><i class="icon_Aftermarket"></i>退款</div>
   <ul class="padding list_info"> 
   <li>待退款订单 &nbsp;<a href="/store/Refund.html" id="refund_pending"></a></li>
   <li>已退款订单 &nbsp;<a href="/store/Refund.html" id="refund_refunded"></a></li>
   </ul>
  </div>
   <div class="col-xs-3 col-lg-6 ">  
   <div class="prompt_name"><i class="icon_Billing"></i>评论</div>
    <ul class="padding list_info">  
   <li>已回复 &nbsp;<a href="/store/feedback.html" id="review_replied"></a></li>
   <li>待回复 &nbsp;<a href="/store/feedback.html" id="review_pendingReply"></a></li>
   </ul>
  </div>
  </div>
  <div class="dd_echarts">
   <div id="main" style="width:100%; height:225px"></div>
  </div>
  </div>
  </div>
  <div class="col-xs-6 ranking_style col-lg-5" >
  <div class="frame clearfix">
   <div class="title_name"><i></i>商品销售排行 </div>
   <table  class="table table_list ranking_list">
    <thead>
     <th width="50">排名</th>
     <th>商品编号</th>
     <th>商品名称</th>
     <th width="80">销售数量</th>
    </thead>
    <tbody id="product_sales_charts">
    </tbody>
   </table>
  </div>
  </div>
 </div>
</div>
</body>
</html>
<script>
//设置框架
$(function() {  		 
	 $("#iframe_box").frame({
	    float : 'left',
		Scroll:'#index_style',
		color_btn:'.skin_select',
		Sellerber_menu:'.list_content',
		page_content:'.list_show',//内容
		datalist:".datatable_height",//数据列表高度取值
        time:'#set-time',
	 });

	 //渲染店铺信息
    $.get("/store/getStoreByBusinessId", {},function (data) {
     if (data.code == 0){
       $("#headImg").attr("src",data.data.headImg);
       $("#id").html(data.data.id);
       $("#name").html(data.data.name);
       $("#level").html(data.data.level);
       $("#createTime").html(data.data.createTime);
       $("#scoreDescription").html(data.data.scoreDescription+"分");
       $("#scoreServiceAttitude").html(data.data.scoreServiceAttitude+"分");
       $("#scoreDeliverySpeed").html(data.data.scoreDeliverySpeed+"分");
      }});
    //渲染销售数据
    $.get("/store/home/statistics",{},function (data) {
     $("#order_number").html(data.data.order_number+"笔");
     $("#review_number").html(data.data.review_number+"条");
     $("#product_number").html(data.data.product_number+"件");
     $("#logistics_number").html(data.data.logistics_number+"条");
     $("#refund_number").html(data.data.refund_number+"笔");
     $("#turnover").html(data.data.turnover+"元");
     $("#product_pending_review").html("("+data.data.product_pending_review+")");
     $("#product_psss").html("("+data.data.product_psss+")");
     $("#product_nopass").html("("+data.data.product_nopass+")");
     $("#order_completed").html("("+data.data.order_completed+")");
     $("#order_toBeDelivered").html("("+data.data.order_toBeDelivered+")");
     $("#order_toBeReceived").html("("+data.data.order_toBeReceived+")");
     $("#refund_pending").html("("+data.data.refund_pending+")");
     $("#refund_refunded").html("("+data.data.refund_refunded+")");
     $("#review_replied").html("("+data.data.review_replied+")");
     $("#review_pendingReply").html("("+data.data.review_pendingReply+")");
    });
    //渲染商品销售排行榜
     $.get("/store/home/getProductBySale",{},function (data) {
      $.each(data.data,function (i,item) {
       var number = i+1;
       $("#product_sales_charts").append("<tr>\n" +
               "<td ><em>"+number+"</em></td>\n" +
               "<td>"+item.id+"</td>\n" +
               "<td><a href='javascript:void(0);'>"+item.name+"</a></td>\n" +
               "<td>"+item.sales+"</td>\n" +
               "   </tr>");
      })
     })
});

/*********************/
$.get("/store/transactionStatistics/lastWeek",{},function (data) {
 var date = [];
 var orders = [];
 var amount = [];
 $.each(data.data,function (i, item) {
  date.push(item.date);
  orders.push(item.orders);
  amount.push(item.amount);
 })
 require.config({
  paths: {
   echarts: './js/dist'
  }
 });
 require(
         [
          'echarts',
          'echarts/theme/macarons',
          'echarts/chart/line',   // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表
          'echarts/chart/bar'
         ],
         function (ec,theme) {
          var myChart = ec.init(document.getElementById('main'),theme);
          option = {
           title : {
            text: '当周交易记录',
            subtext: '每周7天的交易记录'
           },
           tooltip : {
            trigger: 'axis'
           },
           legend: {
            data:['订单','金额']
           },
           toolbox: {
            show : true,
            feature : {
             mark : {show: true},
             dataView : {show: true, readOnly: false},
             magicType : {show: true, type: ['line', 'bar']},
             restore : {show: true},
             saveAsImage : {show: true}
            }
           },
           xAxis : [
            {
             type : 'category',
             "axisLabel":{
              interval: 0
             },
             boundaryGap : false,
             data : date
            }
           ],
           yAxis : [
            {
             type : 'value',
             name : '订单',
             axisLabel : {
              formatter: '{value} 单'
             }
            },
            {
             type : 'value',
             name : '金额',
             axisLabel : {
              formatter: '{value} 元'
             }
            }
           ],
           series : [
            {
             name:'订单',
             type:'line',
             data:orders,
            },
            {
             name:'金额',
             type:'line',
             data:amount,
             yAxisIndex: 1
            },
           ]
          };
          myChart.setOption(option);
         }
 );
})
</script>
